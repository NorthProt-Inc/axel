{"ts":"0208C43","from":"dev-infra","type":"done","task":"INFRA-001","out":"packages/infra/src/db/","note":"L2 PostgreSQL persistence layer — 6 adapters: PgEpisodicMemory (M2), PgSemanticMemory (M3, pgvector hybrid 0.7v+0.3t), PgConceptualMemory (M4, recursive CTE BFS), PgMetaMemory (M5, REFRESH MV CONCURRENTLY), PgSessionStore (ADR-014, channel switch detection), AxelPgPool (wrapper). All interfaces from core/memory/types.ts + core/orchestrator/types.ts. 62 tests (7 pool + 12 episodic + 15 semantic + 12 conceptual + 8 meta + 8 session). Coverage: 95.5% stmt, 75.89% branch, 96.66% funcs. TDD Red-Green-Refactor."}
{"ts":"0208C43","from":"dev-infra","type":"done","task":"INFRA-004","out":"packages/infra/src/embedding/","note":"L5 Embedding service — GeminiEmbeddingService: embed(), embedBatch(), healthCheck(). gemini-embedding-001, 3072d, RETRIEVAL_DOCUMENT/RETRIEVAL_QUERY task types. Batch chunking (max 100), retry 3x exponential backoff (408/429/500/502/503/504), circuit breaker integration. 16 tests. Coverage: 99.18% stmt, 91.11% branch, 100% funcs. TDD Red-Green-Refactor."}
{"ts":"0208C43","from":"dev-infra","type":"done","task":"COMMON-CB","out":"packages/infra/src/common/circuit-breaker.ts","note":"Circuit breaker state machine per ADR-021: closed→open→half_open. CircuitOpenError. Configurable failureThreshold/cooldownMs/halfOpenMaxProbes. 11 tests. Coverage: 100% stmt, 94.44% branch, 100% funcs."}
{"ts":"0208C43","from":"dev-infra","type":"test-result","note":"89 tests, 8 test files, all PASS. Infra package coverage: 96.07% stmt (target 80%), 81.25% branch (target 80%), 96.25% funcs (target 80%), 96.07% lines (target 80%). ALL thresholds exceeded. Biome: 0 errors, 63 warnings (as any in test mocks). Max file: pg-semantic-memory.ts 234 lines (<400 limit)."}
{"ts":"0208C43","from":"dev-infra","type":"plan-amendment","to":"arch","note":"SCHEMA DRIFT: migration-strategy.md 002_episodic.sql sessions table is missing user_id column. EpisodicMemory interface requires userId for createSession() and getRecentSessions(userId). PgSessionStore.resolve(userId, channelId) also needs user_id. Implementation adds user_id to INSERT/SELECT queries. Architect should add 'user_id TEXT NOT NULL' to sessions table in migration-strategy.md and update PLAN_SYNC accordingly."}
{"ts":"0208C43","from":"dev-infra","type":"blocker","note":"@axel/core package.json has exports:{} — no subpath exports configured. All imports use relative paths (../../../core/src/types/*.js) as workaround. DevOps should add proper subpath exports to packages/core/package.json for clean cross-package imports. Not blocking functionality but violates clean import pattern."}
{"ts":"0208C43","from":"dev-infra","type":"dependency","note":"packages/infra/package.json lacks runtime deps: pg, @google/generative-ai. Currently using interface injection (PgPoolDriver, GeminiEmbeddingClient) so tests pass without real packages. DEVOPS-002 (npm deps) will resolve this. Integration tests blocked until DEVOPS-002 + DEVOPS-003 complete."}
